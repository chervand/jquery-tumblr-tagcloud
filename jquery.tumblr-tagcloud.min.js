(function(a){a.fn.tumblrTagCloud=function(p){var d=a.extend({numPosts:50,maxPosts:400,username:false,password:false},p),k=null,q=[],n=[],c=0,b=0,h={},l={},o="",g=null,f;function m(){k.html("Loading... ");a.ajax({url:d.url+"/api/read?num="+d.numPosts+"&start="+d.postCount,dataType:"xml",username:d.username||false,password:d.password||false,success:j,error:function(){k.append("<span>unable to query tag list.</span>")}})}function j(i){k.empty();q=i.getElementsByTagName("tag");n=i.getElementsByTagName("posts");c=n[0].getAttribute("total")-0;for(f=0;f<q.length;f++){o=q[f].textContent.replace(" ","");if(h[o]){h[o]++}else{h[o]=1;l[o]=q[f].textContent}}if(b<Math.min(c,d.maxPosts)){b+=50;m()}else{e()}}function e(){a.each(h,function(i,r){g=a("<a>").attr({href:"/tagged/"+l[i],title:l[i]+" ["+r+"]"}).css("font-size",100+r+"%").html(l[i]);k.append(g)})}return this.each(function(){k=a(this);m()})}})(jQuery);