(function(a){a.fn.tumblrTagCloud=function(p){var d=a.extend({numPosts:50,maxPosts:400},p),k=null,q=[],n=[],c=0,b=0,h={},l={},o="",g=null,f;function m(){a.ajax({url:d.url+"/api/read?num="+d.numPosts+"&start="+d.postCount,success:j,error:function(){k.append("<span>Unable to query tag list.</span>>")},dataType:"xml"})}function j(i){q=i.getElementsByTagName("tag");n=i.getElementsByTagName("posts");c=n[0].getAttribute("total")-0;for(f=0;f<q.length;f++){o=q[f].textContent.replace(" ","");if(h[o]){h[o]++}else{h[o]=1;l[o]=q[f].textContent}}if(b<Math.min(c,d.maxPosts)){b+=50;m()}else{e()}}function e(){a.each(h,function(i,r){g=a("<a>").attr({href:"/tagged/"+l[i],title:l[i]+" ["+r+"]"}).css("font-size",(r+8)+"pt").html(l[i]);k.append(g)})}return this.each(function(){k=a(this);m()})}})(jQuery);