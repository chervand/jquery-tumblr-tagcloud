/*
 * Copyright (C) 2012 Sascha Rudolph
 * Licensed under the BSD 3-Clause License
 * https://github.com/eremit/jquery-tumblr-tagcloud
 */(function(a){a.fn.tumblrTagCloud=function(b){function m(){d.html("Loading... "),a.ajax({url:c.url+"/api/read/json/?num="+c.numPosts+"&start="+j+"&callback=?",dataType:"JSON",username:c.username||!1,password:c.password||!1,success:n,error:function(){d.append("<span>unable to query tag list.</span>")}})}function n(a){d.empty(),jQuery.each(a.posts,function(a,b){if(b.tags&&b.tags.length)for(l=0;l<b.tags.length;l++)k=b.tags[l].replace(" ",""),g[k]?f[g[k]].count++:(g[k]=f.length,f.push({count:1,normalized:k,original:b.tags[l]}))}),i=a.posts.length||0,j<Math.min(i,c.maxPosts)?(j+=50,m()):o()}function o(){c.sortBy==="alpha"?h=f.sort(function(a,b){return a.normalized.localeCompare(b.normalized)}):c.sortBy==="bycount"?h=f.sort(function(a,b){return b.count-a.count}):c.sortBy==="random"?h=f.sort(function(a,b){return Math.round(Math.random())-.5}):a.extend(!0,h,f),d.empty(),jQuery.each(h,function(a,b){d.append(jQuery("<a>").attr({href:c.url+"/tagged/"+b.original,title:b.original+"["+b.count+"]"}).css("font-size",100+b.count+"%").html(b.original))})}var c=a.extend({numPosts:50,maxPosts:400,sortBy:!1,username:!1,password:!1},b),d=null,e=[],f=[],g={},h=[],i=0,j=0,k="",l;return this.each(function(){d=a(this),m()})}})(jQuery);